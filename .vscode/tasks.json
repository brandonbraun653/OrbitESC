{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "CMake Clean",
      "type": "shell",
      "command": "mkdir -p ${workspaceFolder}/build && rm -rf ${workspaceFolder}/build/*",
      "problemMatcher": []
    },
    {
      "label": "Build Proto Interfaces",
      "type": "shell",
      "command": "./build_proto.sh",
      "options": {
        "cwd": "${workspaceFolder}/scripts"
      },
      "problemMatcher": []
    },
    {
      "label": "Dump Sections",
      "type": "shell",
      "command": "arm-none-eabi-objdump -w -d --section=.text OrbitESC > sections.txt",
      "options": {
        "cwd": "${workspaceFolder}/artifacts/last_build_version"
      },
      "problemMatcher": []
    },
    {
      "label": "Dump Sections -- Unmangled",
      "type": "shell",
      "command": "arm-none-eabi-objdump -w -d --demangle --section=.text OrbitESC > sections_unmangled.txt",
      "options": {
        "cwd": "${workspaceFolder}/artifacts/last_build_version"
      },
      "problemMatcher": []
    },
    {
      "label": "Dump Largest Symbols",
      "type": "shell",
      "command": "arm-none-eabi-nm --print-size --size-sort --reverse-sort OrbitESC > symbols.txt",
      "options": {
        "cwd": "${workspaceFolder}/artifacts/last_build_version"
      },
      "problemMatcher": []
    },
    {
      "label": "Dump Largest Symbols -- Unmangled",
      "type": "shell",
      "command": "arm-none-eabi-nm --demangle --print-size --size-sort --reverse-sort OrbitESC > symbols_unmangled.txt",
      "options": {
        "cwd": "${workspaceFolder}/artifacts/last_build_version"
      },
      "problemMatcher": []
    },
    {
      "label": "Analyze .elf RAM Usage",
      "type": "shell",
      "command": "python -m elf_size_analyze -R ${workspaceFolder}/artifacts/last_build_version/OrbitESC",
      "options": {
        "cwd": "${workspaceFolder}/lib/CommonTools/elf-size-analyze"
      },
      "problemMatcher": []
    },
    {
      "type": "shell",
      "label": "Minicom Terminal: ttyUSB0",
      "command": "sudo", // <-- your shell here
      "args": [
        "minicom",
        "-D",
        "/dev/ttyUSB0",
        "-b",
        "921600"
      ],
      "problemMatcher": [],
      "presentation": {
        "echo": false, // silence "Executing task ..."
        "focus": true,
        "panel": "dedicated"
      }
    },
    {
      "type": "shell",
      "label": "Minicom Terminal: ttyUSB1",
      "command": "sudo", // <-- your shell here
      "args": [
        "minicom",
        "-D",
        "/dev/ttyUSB1",
        "-b",
        "921600"
      ],
      "problemMatcher": [],
      "presentation": {
        "echo": false, // silence "Executing task ..."
        "focus": true,
        "panel": "dedicated"
      }
    }
  ]
}